# strategy策略回测

## get_data

1. 获取ROE数据，直接从AK下载，每次需要一个code,因此需要一个codelist，要包含回测期内所有代码。
所以就导出table数据库里的内容，将code单独拿出来作为一列。（这个方法被淘汰了，太慢太耗费算力）
2. 有个数据是按照年份来获取的，而且时间长了就获取不到的数据是哪个来着，是回测历史数据，已经写入到数据库了
3. **预约披露时间**和**业绩快报**的数据用的API, 可以考虑录入数据库

## 数据范围选取
* trddt_range: 20200101-20201231
* 查看download_data/test_history.csv的数据范围,是20200101-20211231
* 开始在日期里面循环生成score数据
    * 对数据进行排序，每天都要进行排序：
        * 排序方法：
            * 利润增长率：降序
            * 利润：降序
            * ROE：降序
        * 方法选择：df.sort_values
        * 排序过程中发现许多code在ROE的数据里没有对应的记录。
    * 一种方法是生成一个大的DF，之后再pivot过来，生成一个二维的数组
    
## 股票池生成
* 因为盈余公告只用的业绩快报，没有用上预告，所以股票池的数量过于少了zne，解决方法：
    * 增加了业绩预告的数据，用来筛选出业绩增长满足条件的股票
    * 增加一个条件，用来扩展筛选股票的口径，即 或者净利润达到10000000以上的公司。